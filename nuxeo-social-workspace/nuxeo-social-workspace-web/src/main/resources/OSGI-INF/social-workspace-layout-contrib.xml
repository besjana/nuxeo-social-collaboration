<?xml version="1.0"?>
<component name="org.nuxeo.ecm.social.workspace.layout">

  <require>org.nuxeo.ecm.platform.forms.layouts.webapp.summary</require>
  <require>org.nuxeo.ecm.platform.forms.layouts.webapp.base</require>

  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
    point="layouts">

    <layout name="social_workspace_heading">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml</template>
      </templates>
      <rows>
        <row>
          <widget>title</widget>
        </row>
        <row>
          <widget>description</widget>
        </row>
        <row>
          <widget>subjects</widget>
        </row>
        <row>
          <widget>social_isPublic</widget>
        </row>
        <row>
          <widget>expired</widget>
        </row>
      </rows>
    </layout>

    <layout name="social_workspace">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml</template>
      </templates>
      <rows>
        <row>
          <widget>created</widget>
        </row>
        <row>
          <widget>modified</widget>
        </row>
        <row>
          <widget>author</widget>
        </row>
        <row>
          <widget>contributors</widget>
        </row>
        <row>
          <widget>lastContributor</widget>
        </row>
      </rows>
    </layout>

    <layout name="article">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml</template>
      </templates>
      <rows>
        <row>
          <widget>social_isPublic</widget>
        </row>
        <row>
          <widget>article_picture</widget>
        </row>
      </rows>
    </layout>

    <layout name="article_summary_layout">
      <templates>
        <template mode="any">/layouts/layout_summary_template.xhtml</template>
      </templates>
      <rows>
        <row>
          <widget>summary_current_document_description</widget>
          <widget>article_text_with_picture</widget>
          <widget>summary_current_document_files</widget>
          <widget>summary_current_document_dublincore</widget>
          <widget>summary_current_document_comments</widget>
        </row>
        <row>
          <widget>summary_current_document_lc_and_version</widget>
          <widget>summary_current_document_actions</widget>
          <widget>summary_current_document_tagging</widget>
          <widget>summary_current_document_relations</widget>
        </row>
        <row>
          <widget>summary_current_document_publications</widget>
        </row>
        <row>
          <widget>summary_current_document_single_tasks</widget>
        </row>
      </rows>
    </layout>
  </extension>

  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
    point="widgets">

    <widget name="social_isPublic" type="checkbox">
      <labels>
        <label mode="any">label.widget.social.isPublic</label>
      </labels>
      <helpLabels>
         <label mode="any">label.widget.social.isPublic.info</label>
       </helpLabels>
      <translated>true</translated>
      <fields>
        <field>soc:isPublic</field>
      </fields>
    </widget>

    <widget name="article_picture" type="file">
      <labels>
        <label mode="any">label.widget.article.picture</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>art:picture</field>
        <field>art:picturename</field>
      </fields>
      <properties widgetMode="edit">
        <property name="styleClass">dataInputText</property>
        <property name="validator">ImageBlobValidator</property>
      </properties>
    </widget>

    <widget name="article_text_with_picture" type="template">
      <fields>
        <field>note:note</field>
        <field>note:mime_type</field>
        <field>art:picturename</field>
      </fields>
      <properties mode="view">
        <property name="translatedHtml">
          #{noteActions.translateImageLinks(field_0)}
        </property>
        <property name="cssClass">note_content_block</property>
        <property name="float">left</property>
      </properties>
      <properties mode="any">
        <property name="template">/widgets/article_summary_widget_template.xhtml</property>
      </properties>
      <widgetModes>
        <mode value="any">view</mode>
      </widgetModes>
    </widget>

  </extension>

</component>
