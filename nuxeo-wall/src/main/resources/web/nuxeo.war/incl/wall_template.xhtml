<div xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:c="http://java.sun.com/jstl/core">

  <c:if test="false">
   Template rendering the wall OpenSocial gadget.

   Parameters:
   - document: the document for which to display the wall.
   - activityStreamName: the name of the activity stream to be used by the wall
     to display the activities.
   -
  </c:if>

  <nxu:set var="docPath" value="#{nxu:test(!empty document, document.pathAsString, '')}">

  <div class="gadget-wall threeQuarterWidth"></div>

  <script type="text/javascript">
    jQuery('.gadget-wall').openSocialGadget({
      baseURL: '#{baseURL}',
      language: '#{localeSelector.language}',
      gadgetDefs: [
        { specUrl: '#{gadgetsBaseURL}/site/gadgets/wall/wall.xml',
          title: '',
          userPrefs: {
            nuxeoTargetContextPath: {
              value: '#{docPath}'
            },
            activityStreamName: {
              value: '#{activityStreamName}'
            }

          },
          displayTitleBar: false,
          width: '100%'
        }
      ]
    });
  </script>

  </nxu:set>
</div>
