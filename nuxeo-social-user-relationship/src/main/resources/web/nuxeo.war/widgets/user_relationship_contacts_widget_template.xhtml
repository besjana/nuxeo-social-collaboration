<f:subview xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:h="http://java.sun.com/jsf/html"
  id="#{widget.id}">

  <c:set var="displayedName" value="#{nxu:test(empty userManagementActions.selectedUser.user.firstName, userManagementActions.selectedUser.id, userManagementActions.selectedUser.user.firstName)}" scope="page" />
  <h:outputFormat value="#{messages['action.social.user.relationship.user.relations']}">
    <f:param value="#{displayedName}" />
  </h:outputFormat>
  <nxu:dataTable id="table_relations_#{widget.id}" var="relation"
    value="#{userRelationshipAction.relationshipsFromSelectedUser}">
    <nxu:column>
      <h:graphicImage value="/icons/user.gif" alt="user.gif" />
      <a4j:commandLink action="#{userManagementActions.viewUser(relation)}" reRender="usersPanel">
        <h:outputText value="#{nxu:userFullName(relation)}" />
      </a4j:commandLink>
    </nxu:column>
  </nxu:dataTable>

</f:subview>
